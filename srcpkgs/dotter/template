# Template file for 'dotter'
pkgname=dotter
version=0.13.1
revision=1
build_style=cargo
build_helper=qemu
checkdepends="which"
short_desc="Dotfile manager and templater written in rust"
maintainer="Lukas Jordan <dev@lukasjordan.com>"
license="Unlicense"
homepage="https://github.com/SuperCuber/dotter"
changelog="https://github.com/SuperCuber/dotter/releases"
distfiles="https://github.com/SuperCuber/dotter/archive/refs/tags/v${version}.tar.gz"
checksum=b017b8315a76bf62b2e8e65217d487ad88b73fc18110a679076e6ad6e3936c40

post_build() {
	mkdir completions
	for shell in bash fish zsh; do
		vtargetrun target/${RUST_TARGET}/release/dotter gen-completions --shell ${shell} --to completions
	done
}

post_install() {
	vlicense LICENSE.md
	vcompletion completions/dotter.bash bash
	vcompletion completions/dotter.fish fish
	vcompletion completions/_dotter zsh
}
